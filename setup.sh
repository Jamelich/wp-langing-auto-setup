#!/bin/bash
# ============================================
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ WordPress
# –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/Jamelich/wp-langing-auto-setup
# ============================================

echo "üöÄ –ù–∞—á–∏–Ω–∞—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É WordPress..."
echo "============================================="

# –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–õ–û–ö: –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–∞–ø–∫–∏ (–∫—Ä–æ–º–µ —Å–∞–º–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞)
echo "üßπ –û—á–∏—â–∞—é —Ä–∞–±–æ—á—É—é –ø–∞–ø–∫—É –æ—Ç —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤..."
# –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ, –∫—Ä–æ–º–µ —Ñ–∞–π–ª–∞ setup.sh
find . -maxdepth 1 ! -name 'setup.sh' ! -name '.' ! -name '..' -exec rm -rf {} + 2>/dev/null
echo "‚úÖ –ü–∞–ø–∫–∞ –æ—á–∏—â–µ–Ω–∞"

# 1. –£–°–¢–ê–ù–û–í–ö–ê WORDPRESS
echo "üì¶ –°–∫–∞—á–∏–≤–∞—é –∏ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—é WordPress..."
wget -q https://wordpress.org/latest.tar.gz
tar -xzf latest.tar.gz --strip-components=1
rm -f latest.tar.gz
echo "‚úÖ WordPress —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

# 2. –£–°–¢–ê–ù–û–í–ö–ê –ü–õ–ê–ì–ò–ù–û–í
echo "üîå –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –ø–ª–∞–≥–∏–Ω—ã..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–∞–ø–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ —Å–æ–∑–¥–∞–ª–∞—Å—å
if [ ! -d "wp-content/plugins" ]; then
    echo "‚ùå –û–®–ò–ë–ö–ê: –ü–∞–ø–∫–∞ wp-content/plugins –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!"
    exit 1
fi

cd wp-content/plugins/
echo "   üìÇ –¢–µ–∫—É—â–∞—è –ø–∞–ø–∫–∞: $(pwd)"

# –°–ø–∏—Å–æ–∫ –ø–ª–∞–≥–∏–Ω–æ–≤ (–º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å)
PLUGINS=(
    "wordpress-seo"
    "contact-form-7"
)

for plugin in "${PLUGINS[@]}"; do
    echo "   üì• –ó–∞–≥—Ä—É–∂–∞—é ${plugin}..."
    wget -q "https://downloads.wordpress.org/plugin/${plugin}.latest-stable.zip"
    if [ $? -ne 0 ]; then
        echo "   ‚ö†Ô∏è  –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –Ω–µ —É–¥–∞–ª–æ—Å—å —Å–∫–∞—á–∞—Ç—å ${plugin}"
    fi
done

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ ZIP-—Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏
if ls *.zip 1> /dev/null 2>&1; then
    unzip -q *.zip
    rm -f *.zip
    echo "‚úÖ –ü–ª–∞–≥–∏–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"
else
    echo "‚ùå –û–®–ò–ë–ö–ê: –ù–µ –Ω–∞–π–¥–µ–Ω–æ –∞—Ä—Ö–∏–≤–æ–≤ –ø–ª–∞–≥–∏–Ω–æ–≤!"
    exit 1
fi

# 3. –£–°–¢–ê–ù–û–í–ö–ê –¢–ï–ú–´
echo "üé® –ö–ª–æ–Ω–∏—Ä—É—é —Ç–µ–º—É esalanding..."
cd ../themes/
if [ $? -eq 0 ]; then
    git clone -q https://github.com/Jamelich/esalanding.git esalanding
    rm -rf esalanding/.git
    echo "‚úÖ –¢–µ–º–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
else
    echo "‚ùå –û–®–ò–ë–ö–ê: –ù–µ —É–¥–∞–ª–æ—Å—å –ø–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É themes/"
    exit 1
fi

# 4. –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ò –ò–ù–°–¢–†–£–ö–¶–ò–Ø
echo ""
echo "============================================="
echo "‚ú® –£–°–¢–ê–ù–û–í–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê!"
echo "============================================="
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤:"
ls -1 wp-content/plugins/
echo ""
echo "–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo "1. üìÇ –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö MySQL —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —Ö–æ—Å—Ç–∏–Ω–≥–∞"
echo "2. üåê –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ –∞–¥—Ä–µ—Å—É –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞"
echo "3. üîß –ó–∞–≤–µ—Ä—à–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É WordPress —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å"
echo "4. ‚öôÔ∏è  –í –∞–¥–º–∏–Ω–∫–µ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–ª–∞–≥–∏–Ω—ã –∏ —Ç–µ–º—É 'esalanding'"
echo ""
echo "–°–∫—Ä–∏–ø—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è Jamelich (wp-langing-auto-setup)"
echo "============================================="
