#!/bin/bash
# ============================================
# –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –£–°–¢–ê–ù–û–í–ö–ê WORDPRESS
# –í–µ—Ä—Å–∏—è —Å–∫—Ä–∏–ø—Ç–∞: 2.0-FINAL-FIX
# –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/Jamelich/wp-langing-auto-setup
# ============================================

echo "üöÄ –ù–∞—á–∏–Ω–∞—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É WordPress..."
echo "============================================="

# 1. –£–°–¢–ê–ù–û–í–ö–ê WORDPRESS
echo "üì¶ –°–∫–∞—á–∏–≤–∞—é –∏ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—é WordPress..."
wget -q https://wordpress.org/latest.tar.gz
tar -xzf latest.tar.gz --strip-components=1
rm -f latest.tar.gz
echo "‚úÖ WordPress —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

# 2. –£–°–¢–ê–ù–û–í–ö–ê –ü–õ–ê–ì–ò–ù–û–í
echo "üîå –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –ø–ª–∞–≥–∏–Ω—ã..."
cd wp-content/plugins/
echo "   üìÇ –†–∞–±–æ—á–∞—è –ø–∞–ø–∫–∞: $(pwd)"

PLUGINS=("wordpress-seo" "contact-form-7")
ERRORS=0

for plugin in "${PLUGINS[@]}"; do
    echo "   üì• –ó–∞–≥—Ä—É–∂–∞—é ${plugin}..."
    if wget -q "https://downloads.wordpress.org/plugin/${plugin}.latest-stable.zip"; then
        echo "   ‚úÖ –£—Å–ø–µ—à–Ω–æ"
    else
        echo "   ‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"
        ERRORS=$((ERRORS+1))
    fi
done

# –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏
ZIP_FILES=$(ls *.zip 2>/dev/null | wc -l)
if [ "$ZIP_FILES" -gt 0 ]; then
    echo "   üì¶ –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—é –∞—Ä—Ö–∏–≤—ã ($ZIP_FILES —Ñ–∞–π–ª(–æ–≤))..."
    unzip -q "*.zip"
    rm -f *.zip
    echo "‚úÖ –ü–ª–∞–≥–∏–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"
else
    echo "‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –ù–µ –Ω–∞–π–¥–µ–Ω–æ –∞—Ä—Ö–∏–≤–æ–≤ –¥–ª—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏"
fi

if [ "$ERRORS" -gt 0 ]; then
    echo "‚ö†Ô∏è  –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–ª–∞–≥–∏–Ω—ã –Ω–µ –±—ã–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã ($ERRORS –æ—à–∏–±–æ–∫)"
fi

# 3. –£–°–¢–ê–ù–û–í–ö–ê –¢–ï–ú–´
echo "üé® –ö–ª–æ–Ω–∏—Ä—É—é —Ç–µ–º—É esalanding..."
cd ../../
cd wp-content/themes/
if git clone -q https://github.com/Jamelich/esalanding.git esalanding 2>/dev/null; then
    rm -rf esalanding/.git
    echo "‚úÖ –¢–µ–º–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
else
    echo "‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–º—É (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ GitHub)"
fi

# 4. –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê
echo ""
echo "============================================="
echo "‚ú® –£–°–¢–ê–ù–û–í–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê!"
echo "============================================="
cd ../../
echo "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏ wp-content/plugins/:"
ls -1 wp-content/plugins/
echo ""
echo "–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo "1. üìÇ –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö MySQL"
echo "2. üåê –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É —Å–∞–π—Ç–∞"
echo "3. üîß –ó–∞–≤–µ—Ä—à–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É WordPress"
echo "4. ‚öôÔ∏è  –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–ª–∞–≥–∏–Ω—ã –∏ —Ç–µ–º—É 'esalanding'"
echo ""
echo "–°–∫—Ä–∏–ø—Ç v2.0-FINAL-FIX | –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è Jamelich"
echo "============================================="
