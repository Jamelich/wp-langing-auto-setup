#!/bin/bash
# ============================================
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ WordPress
# –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ê–Ø –í–ï–†–°–ò–Ø
# –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/Jamelich/wp-langing-auto-setup
# ============================================

echo "üöÄ –ù–∞—á–∏–Ω–∞—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É WordPress..."
echo "============================================="

# 1. –£–°–¢–ê–ù–û–í–ö–ê WORDPRESS
echo "üì¶ –°–∫–∞—á–∏–≤–∞—é –∏ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—é WordPress..."
wget https://wordpress.org/latest.tar.gz
tar -xzf latest.tar.gz --strip-components=1
rm -f latest.tar.gz
echo "‚úÖ WordPress —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

# 2. –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–õ–ê–ì–ò–ù–û–í
echo "üîå –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –ü—ã—Ç–∞—é—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–ª–∞–≥–∏–Ω—ã..."
cd wp-content/plugins/
echo "   üìÇ –¢–µ–∫—É—â–∞—è –ø–∞–ø–∫–∞: $(pwd)"

PLUGINS=("wordpress-seo" "contact-form-7")

for plugin in "${PLUGINS[@]}"; do
    echo "   üì• –ó–∞–≥—Ä—É–∂–∞—é ${plugin}..."
    URL="https://downloads.wordpress.org/plugin/${plugin}.latest-stable.zip"
    echo "   üîó URL: $URL"
    wget "$URL"
    if [ -f "${plugin}.latest-stable.zip" ]; then
        echo "   ‚úÖ –ê—Ä—Ö–∏–≤ —Å–∫–∞—á–∞–Ω: $(ls -lh "${plugin}.latest-stable.zip")"
    else
        echo "   ‚ùå –§–ê–¢–ê–õ–¨–ù–ê–Ø –û–®–ò–ë–ö–ê: –ê—Ä—Ö–∏–≤ –Ω–µ —Å–∫–∞—á–∞–ª—Å—è!"
        echo "      –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:"
        echo "      1. –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ downloads.wordpress.org —Å –≤–∞—à–µ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞"
        echo "      2. –û—à–∏–±–∫–∞ —Å–µ—Ç–∏"
        echo "      3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è –ø–ª–∞–≥–∏–Ω–∞"
        exit 1
    fi
done

echo "   üì¶ –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—é –∞—Ä—Ö–∏–≤—ã..."
unzip -q "*.zip" && rm -f *.zip
echo "‚úÖ –ü–ª–∞–≥–∏–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"

# 3. –£–°–¢–ê–ù–û–í–ö–ê –¢–ï–ú–´
echo "üé® –ö–ª–æ–Ω–∏—Ä—É—é —Ç–µ–º—É esalanding..."
cd ../../ && cd wp-content/themes/
if git clone https://github.com/Jamelich/esalanding.git esalanding; then
    rm -rf esalanding/.git
    echo "‚úÖ –¢–µ–º–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
else
    echo "‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–º—É"
fi

# 4. –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê
echo ""
echo "============================================="
echo "‚ú® –£–°–¢–ê–ù–û–í–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê!"
echo "============================================="
cd ../../
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ wp-content/plugins/:"
ls -la wp-content/plugins/
echo ""
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–∞—á–∞–Ω–Ω—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤ (–µ—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å):"
find . -name "*.zip" 2>/dev/null
echo ""
echo "–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo "1. üìÇ –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö MySQL"
echo "2. üåê –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É —Å–∞–π—Ç–∞"
echo "3. üîß –ó–∞–≤–µ—Ä—à–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É WordPress"
echo "4. ‚öôÔ∏è  –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–ª–∞–≥–∏–Ω—ã –∏ —Ç–µ–º—É"
echo ""
echo "–°–∫—Ä–∏–ø—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è Jamelich"
echo "============================================="
